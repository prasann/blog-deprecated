
** Add Dynamically **

  addMiddleware(middleware) {
    const middlewareAPI = {
      getState: this.store.getState,
      dispatch: action => this.store.dispatch(action),
    };

    this.store.dispatch = compose(middleware(middlewareAPI))(this.store.dispatch);
  }



** Middleware **

import actionTypes from './actionTypes';

export const OFFER_LOCAL_STORAGE_KEY = 'OFFER_EQUIPMENT_LIST_STATE';

const persistOfferEquipmentListState = middlewareAPI => next => (action) => {
  if (action.type === actionTypes.CHANGE_EQUIPMENT_LIST_COLLAPSED_STATE) {
    const result = next(action);
    const state =
          JSON.stringify(middlewareAPI.getState().offer.common.equipmentListCollapsedState);
    window.localStorage.setItem(OFFER_LOCAL_STORAGE_KEY, state);
    return result;
  }
  return next(action);
};

export default persistOfferEquipmentListState;
